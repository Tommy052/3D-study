# 02. 래스터화 (Rasterization)

삼각형(벡터 데이터)을 픽셀(래스터 데이터)로 변환하는 과정.
GPU가 가장 잘하는 일이다.

---

## 개념

```
삼각형의 세 정점:
  A = (100, 50)
  B = (200, 200)
  C = (50, 200)

→ 삼각형 내부의 모든 픽셀을 찾아야 함
→ 찾은 픽셀마다 색상(프래그먼트 셰이더) 계산
```

---

## 무게중심 좌표 (Barycentric Coordinates)

삼각형 내부 픽셀의 값을 보간하는 방법.

```
삼각형 ABC에서 임의의 점 P:
P = α*A + β*B + γ*C

조건: α + β + γ = 1, 모두 0 이상이면 삼각형 내부

α = 면적(PBC) / 면적(ABC)
β = 면적(APC) / 면적(ABC)
γ = 면적(ABP) / 면적(ABC)
```

**활용 — 값 보간:**
```
정점 A의 UV = (0, 0)
정점 B의 UV = (1, 0)
정점 C의 UV = (0, 1)

픽셀 P에서:
α=0.5, β=0.3, γ=0.2

P의 UV = 0.5*(0,0) + 0.3*(1,0) + 0.2*(0,1)
       = (0.3, 0.2)
```

---

## Z-Buffer (깊이 버퍼)

같은 픽셀에 여러 삼각형이 겹칠 때, 가장 앞에 있는 것만 그림.

```
각 픽셀마다 깊이값(z) 저장
새 삼각형의 z < 저장된 z → 덮어쓰기 (더 가까움)
새 삼각형의 z > 저장된 z → 무시 (더 멀음)
```

---

## 클리핑 (Clipping)

카메라 시야 밖의 삼각형은 그리지 않음.

```
Frustum (절두체) — 카메라가 볼 수 있는 영역:
  Near Plane  : 너무 가까운 것 제거
  Far Plane   : 너무 먼 것 제거
  Left/Right  : 화면 좌우 밖 제거
  Top/Bottom  : 화면 위아래 밖 제거
```

---

## 백페이스 컬링 (Backface Culling)

뒤를 향한 삼각형은 그리지 않음 → 성능 최적화

```
삼각형의 정점 순서 (Winding Order):
  시계 방향     = 뒷면
  반시계 방향   = 앞면 (카메라를 향함)

→ 뒷면 삼각형은 래스터화 전에 제거
```

```typescript
// Babylon.js에서 컬링 설정
mat.backFaceCulling = true;  // 기본값 (뒷면 제거)
mat.backFaceCulling = false; // 양면 렌더링 (얇은 면, 풀 등)
```

---

## 다음 단계

→ [03. 조명 모델 (Lighting Model)](../03-lighting-model)
